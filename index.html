<!doctype html>
<html lang="si">
<head>
<meta charset="utf-8" />
<title>Loan Declaration - Flexico</title>

<style>
    body{
        font-family:Arial;
        padding:20px;
        background:#f0f3f7;
    }
    .box{
        background:#fff;
        padding:20px;
        border-radius:10px;
        max-width:700px;
        margin:auto;
        box-shadow:0 4px 12px rgba(0,0,0,0.1);
    }
    label{margin-top:10px;display:block;font-size:14px;color:#444;}
    input{
        width:100%;
        padding:10px;
        margin-top:4px;
        border-radius:6px;
        border:1px solid #ccc;
        font-size:15px;
    }
    #sig{
        width:100%;
        height:180px;
        border:1px solid #aaa;
        background:#fff;
        margin-top:10px;
    }
    button{
        padding:10px 16px;
        margin-top:12px;
        border:none;
        border-radius:6px;
        background:#007bff;
        color:#fff;
        cursor:pointer;
        font-size:15px;
    }
    button.secondary{
        background:#555;
        margin-left:10px;
    }
    #result{
        margin-top:25px;
        padding:20px;
        background:#ffffff;
        border-radius:10px;
        display:none;
        border:1px solid #d3d8e0;
    }
    .title{
        font-weight:bold;
        color:#007bff;
        margin-bottom:10px;
        font-size:18px;
    }
</style>

</head>
<body>

<div class="box">
    <h2>Flexico ණය තහවුරු කිරීම</h2>

    <label>ලබාගන්නා පුද්ගලයාගේ නම</label>
    <input id="name" type="text" required>

    <label>ලබාගන්නා ණය මුදල</label>
    <input id="amount" type="text" required>

    <label>ජාතික හැඳුනුම්පත් අංකය</label>
    <input id="nic" type="text" required>

    <label>මෙතන අත්සන් කරන්න</label>
    <canvas id="sig"></canvas>

    <button onclick="submitForm()">Submit</button>
    <button class="secondary" onclick="clearSig()">Clear Signature</button>
</div>


<!-- RESULTS AREA -->
<div id="result">
    <div class="title">ඉල්ලීම් විස්තර</div>

    <p><b>නම:</b> <span id="r_name"></span></p>
    <p><b>මුදල:</b> <span id="r_amount"></span></p>
    <p><b>NIC:</b> <span id="r_nic"></span></p>
    <p><b>අත්සන:</b></p>
    <img id="r_sig" style="width:250px;border:1px solid #aaa;">
</div>


<script>
// ---------------- Signature Pad ----------------
const canvas = document.getElementById("sig");
const ctx = canvas.getContext("2d");
let drawing = false;

canvas.addEventListener("mousedown", start);
canvas.addEventListener("mousemove", draw);
canvas.addEventListener("mouseup", () => drawing = false);
canvas.addEventListener("mouseleave", () => drawing = false);

function start(e){
    drawing = true;
    ctx.beginPath();
    ctx.moveTo(e.offsetX, e.offsetY);
}
function draw(e){
    if(!drawing) return;
    ctx.lineWidth = 2;
    ctx.lineCap = "round";
    ctx.strokeStyle = "#000";
    ctx.lineTo(e.offsetX, e.offsetY);
    ctx.stroke();
}

function clearSig(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
}

// ---------------- Submit & Show Data ------------
function submitForm(){
    const name   = document.getElementById("name").value;
    const amount = document.getElementById("amount").value;
    const nic    = document.getElementById("nic").value;

    if(!name || !amount || !nic){
        alert("කරුණාකර සියලු විස්තර ඇතුල් කරන්න.");
        return;
    }

    // Get signature image
    const signature = canvas.toDataURL("image/png");

    // Show data in result box
    document.getElementById("r_name").innerText = name;
    document.getElementById("r_amount").innerText = amount;
    document.getElementById("r_nic").innerText = nic;
    document.getElementById("r_sig").src = signature;

    document.getElementById("result").style.display = "block";

    // Scroll to result
    window.scrollTo({top:document.body.scrollHeight, behavior:'smooth'});
}
</script>

</body>
</html>
